/*! all-is-dust 2015-08-08 */

"use strict";window.AllIsDust={Models:{},Collections:{},Views:{},Router:{},Events:_.extend({},Backbone.Events)},Handlebars.registerHelper("toHex",function(a){return"0x"+parseInt(a,10).toString(16)}),Handlebars.registerHelper("inc",function(a){return parseInt(a)+1}),Handlebars.registerHelper("dec",function(a){return parseInt(a)-1}),Handlebars.registerHelper("floor",function(a){return Math.floor(parseInt(a))}),$(document).keyup(function(a){13===a.keyCode&&AllIsDust.Events.trigger("keypress:enter")}),window.getCookie=function(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2===c.length?c.pop().split(";").shift():void 0},Backbone._sync=Backbone.sync,Backbone.sync=function(a,b,c,d){return c.beforeSend=function(a){window.session?a.setRequestHeader("X-ALL-IS-DUST",window.session.get("data")):a.setRequestHeader("X-ALL-IS-DUST","unauthenticated"),a.setRequestHeader("X-Xsrftoken",window.getCookie("_xsrf"))},c.complete=function(a){403===a.status&&(console.log("[sync] API call failed authentication"),AllIsDust.Events.trigger("router:logout"))},Backbone._sync(a,b,c,d)},AllIsDust.Views.BaseView=Backbone.View.extend({tagName:"div",attributes:{"class":"container"},cleanup:function(){}}),AllIsDust.Views.BaseSubView=Backbone.View.extend({cleanup:function(){}}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.Home=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="container">\n<div class="page-header">\n<div class="jumbotron">\n<div class="container">\n<h1>All is Dust</h1>\n<h3>\nTarget Organization Sacrifices All Passwords\n</h3>\n</div>\n</div>\n</div>\n<div class="row">\n<div class="col-md-12">\n<h2>\n<i class="fa fa-fw fa-server"></i>\nRecent Jobs\n</h2>\n<table class="table table-hover">\n<thead>\n<tr>\n<th>Created</th>\n<th>Job Name</th>\n<th>Success Rate</th>\n<th>Status</th>\n<th><!-- Button --></th>\n</tr>\n</thead>\n<tbody id="recent-jobs">\n</tbody>\n</table>\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.Login=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="row">\n<div class="col-md-4 col-md-offset-4">\n<form class="form-signin">\n<h2 class="form-signin-heading">\n<i class="fa fa-fw fa-lock"></i>\nAll Is Dust\n</h2>\n<div id="login-errors"></div>\n<div class="input-group">\n<div class="input-group-addon">\n<i class="fa fa-fw fa-user"></i>\n</div>\n<input autofocus id="login-username" class="form-control" type="text" placeholder="Username">\n</div>\n<div class="input-group">\n<div class="input-group-addon">\n<i class="fa fa-fw fa-key"></i>\n</div>\n<input id="login-password" class="form-control" type="password" placeholder="Password" autocomplete="off">\n</div>\n<button id="login-button" class="btn btn-primary btn-block" type="button">\n<i class="fa fa-fw fa-sign-in"></i>\nAuthenticate\n</button>\n</form>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.NotFound=Handlebars.template({1:function(a,b,c,d){var e;return": "+this.escapeExpression((e=null!=(e=b.other||(null!=a?a.other:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"other",hash:{},data:d}):e))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<div class="container">\n<h1 class="page-header">\n<i class="fa fa-fw fa-question-circle"></i>\nPage Not Found'+(null!=(e=b["if"].call(a,null!=a?a.other:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'\n</h1>\n<div class="row text-center">\n<img class="img-thumbnail" src="/static/images/404.gif" />\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.PasswordTableRow=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"<td>"+f(e(null!=a?a.preimage:a,a))+"</td>\n<td>"+f(e(null!=a?a.hexdigest:a,a))+"</td>\n"},useData:!0}),this.Handlebars.templates.PasswordsTable=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<h3>\n<i class="fa fa-fw fa-key"></i>\nPasswords\n</h3>\n<table class="table table-hover">\n<thead>\n<tr>\n<th>Preimage</th>\n<th>Hexdigest</th>\n</tr>\n</thead>\n<tbody id="passwords-table">\n</tbody>\n</table>\n'},useData:!0}),this.Handlebars.templates.SelectFromCollection=Handlebars.template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(null!=a?a.id:a,a))+'">'+f(e(null!=a?a.name:a,a))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<label for="input-format">'+i((f=null!=(f=b.title||(null!=a?a.title:a))?f:g,typeof f===h?f.call(a,{name:"title",hash:{},data:d}):f))+'</label>\n<select id="'+i((f=null!=(f=b["select-id"]||(null!=a?a["select-id"]:a))?f:g,typeof f===h?f.call(a,{name:"select-id",hash:{},data:d}):f))+'" class="form-control" name="input-format">\n<option value="">None</option>\n'+(null!=(e=b.each.call(a,null!=a?a.models:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"</select>\n"},useData:!0}),this.Handlebars.templates.Settings=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="container">\n<div class="page-header">\n<h1>\n<i class="fa fa-fw fa-gears"></i>\nSettings\n<small>'+this.escapeExpression(this.lambda(null!=a?a.name:a,a))+'</small>\n</h1>\n</div>\n<div class="row">\n<div class="col-md-12">\nstuff\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.EditUser=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return"\n"},useData:!0}),this.Handlebars.templates.ManageUsers=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div id="create-new-user-modal" class="modal fade">\n<div class="modal-dialog">\n<div class="modal-content">\n<div class="modal-header">\n<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n<span aria-hidden="true">&times;</span>\n</button>\n<h4 class="modal-title">\n<i class="fa fa-fw fa-user"></i>\nCreate New User\n</h4>\n</div>\n<div class="modal-body">\n<div id="create-new-user-errors"></div>\n<form id="new-user-form">\n<div class="form-group">\n<label for="new-user-name">User Name</label>\n<input type="text" class="form-control" id="new-user-name" placeholder="User Name">\n</div>\n<div class="form-group">\n<label for="new-user-password">Password</label>\n<input type="password" class="form-control" id="new-user-password" placeholder="Password">\n</div>\n<div class="form-group">\n<label for="new-user-confirm">Confirm Password</label>\n<input type="password" class="form-control" id="new-user-confirm" placeholder="Confirm Password">\n</div>\n<div class="checkbox">\n<label>\n<input id="new-user-is-admin" type="checkbox">\nAdmin\n</label>\n</div>\n</form>\n</div>\n<div class="modal-footer">\n<button type="button" class="btn btn-default" data-dismiss="modal">\nClose\n</button>\n<button id="create-new-user" type="button" class="btn btn-primary">\n<i class="fa fa-fw fa-plus"></i>\nCreate User\n</button>\n</div><!-- /.model-footer -->\n</div><!-- /.modal-content -->\n</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n<div class="container">\n<div class="page-header">\n<h1>\n<i class="fa fa-fw fa-user"></i>\nUsers\n</h1>\n</div>\n<div class="row">\n<div class="col-md-12">\n<button id="show-new-user-modal" class="btn btn-success" type="button">\n<i class="fa fa-fw fa-plus"></i>\nCreate New User\n</button>\n</div>\n</div>\n<br />\n<div class="row">\n<div class="col-md-12">\n<table class="table table-hover">\n<thead>\n<tr>\n<th>Name</th>\n<th>Administrator</th>\n<th>Jobs</th>\n<th>Organizations</th>\n<th><!-- Edit Button --></th>\n<th><!-- Delete Button --></th>\n</tr>\n</thead>\n<tbody id="all-users">\n</tbody>\n</table>\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.UserTableRow=Handlebars.template({1:function(a,b,c,d){return'<i class="fa fa-fw fa-check-square-o"></i>\n'},3:function(a,b,c,d){return'<i class="fa fa-fw fa-square-o"></i>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"<td>"+g(f(null!=a?a.name:a,a))+"</td>\n<td>\n"+(null!=(e=b["if"].call(a,null!=a?a.is_admin:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+"</td>\n<td>\n"+g(f(null!=(e=null!=a?a.jobs:a)?e.length:e,a))+"\n</td>\n<td>\n"+g(f(null!=(e=null!=a?a.organizations:a)?e.length:e,a))+'\n</td>\n<td>\n<a data-userid="'+g(f(null!=a?a.id:a,a))+'" class="btn btn-warning btn-xs" type="button">\n<i class="fa fa-fw fa-pencil"></i>\nEdit\n</a>\n</td>\n<td>\n<a data-userid="'+g(f(null!=a?a.id:a,a))+'" class="btn btn-danger btn-xs" type="button">\n<i class="fa fa-fw fa-trash-o"></i>\nDelete\n</a>\n</td>\n'},useData:!0}),this.Handlebars.templates.ErrorAlert=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n<span aria-hidden="true">&times;</span>\n</button>\n<h4 class="alert-heading">\n<strong>'+f(e(null!=a?a.title:a,a))+"</strong>\n</h4>\n"+f(e(null!=a?a.error:a,a))+"\n"},useData:!0}),this.Handlebars.templates.CreateJob=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="container">\n<div class="page-header">\n<h1>\n<i class="fa fa-fw fa-crosshairs"></i>\nCreate Job\n</h1>\n</div>\n<div class="row">\n<div class="col-md-6">\n<div class="form-group">\n<textarea autofocus id="job-passwords" class="form-control monospace" rows="10" placeholder="Copy &amp; Paste Hashes Here"></textarea>\n</div>\n</div>\n<div id="dropzone" class="col-md-6 inner cover monospace">\n<p>\nDrag &amp; Drop Files Here\n</p>\n</div>\n</div>\n<br />\n<div id="job-errors"></div>\n<div class="row">\n<div class="col-md-12">\n<div class="form-group">\n<label for="input-job-name">Job Name</label>\n<input id="job-name" type="text" class="form-control" placeholder="Job Name">\n</div>\n\n<div id="select-organization"></div>\n\n<div id="select-algorithm"></div>\n\n<div class="form-group">\n<label for="input-format">Format</label>\n<select id="job-encoder" class="form-control" name="input-format">\n<option value="hex">Hex</option>\n<option value="base64">Base 64</option>\n</select>\n</div>\n\n<hr />\n<button id="create-job" type="button" class="btn btn-success">\n<i class="fa fa-fw fa-plus"></i>\nCreate Job\n</button>\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.JobHistory=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="container">\n<div class="page-header">\n<h1>\n<i class="fa fa-fw fa-history"></i>\nHistory\n</h1>\n</div>\n<div class="row">\n<div class="col-md-12">\n<table class="table table-hover">\n<thead>\n<tr>\n<th>Created</th>\n<th>Job Name</th>\n<th>Success Rate</th>\n<th>Status</th>\n<th><!-- Button --></th>\n</tr>\n</thead>\n<tbody id="job-history">\n</tbody>\n</table>\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.JobTableRow=Handlebars.template({1:function(a,b,c,d){return"Completed\n"},3:function(a,b,c,d){var e;return null!=(e=b["if"].call(a,null!=a?a.started:a,{name:"if",hash:{},fn:this.program(4,d,0),inverse:this.program(6,d,0),data:d}))?e:""},4:function(a,b,c,d){return"Started\n"},6:function(a,b,c,d){return"Not Started\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"<td>"+g(f(null!=a?a.created:a,a))+"</td>\n<td>"+g(f(null!=a?a.name:a,a))+"</td>\n<td>"+g((b.floor||a&&a.floor||b.helperMissing).call(a,null!=a?a.success_rate:a,{name:"floor",hash:{},data:d}))+"%</td>\n<td>\n"+(null!=(e=b["if"].call(a,null!=a?a.completed:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+'</td>\n<td>\n<a href="#job/'+g(f(null!=a?a.id:a,a))+'" class="btn btn-primary btn-xs" type="button">\nView Details\n<i class="fa fa-arrow-circle-right"></i>\n</a>\n</td>\n'},useData:!0}),this.Handlebars.templates.SingleJob=Handlebars.template({1:function(a,b,c,d){var e;return"from "+this.escapeExpression(this.lambda(null!=(e=null!=a?a.organization:a)?e.name:e,a))+"\n"},3:function(a,b,c,d){return" True "},5:function(a,b,c,d){return" False "},7:function(a,b,c,d){var e,f=this.escapeExpression,g=this.lambda;return"<tr>\n<td>"+f((b.inc||a&&a.inc||b.helperMissing).call(a,d&&d.index,{name:"inc",hash:{},data:d}))+"</td>\n<td>"+f(g(null!=a?a.encoding:a,a))+"</td>\n<td>\n"+(null!=(e=b["if"].call(a,null!=a?a.preimage:a,{name:"if",hash:{},fn:this.program(8,d,0),inverse:this.program(10,d,0),data:d}))?e:"")+'</td>\n<td>\n<p class="monospace">'+f(g(null!=a?a.hexdigest:a,a))+"</p>\n</td>\n</tr>\n"},8:function(a,b,c,d){return'<p class="monospace">\n'+this.escapeExpression(this.lambda(null!=a?a.preimage:a,a))+"\n</p>\n"},10:function(a,b,c,d){return'<i class="fa fa-fw fa-question-circle"></i>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<h1 class="page-header">\n<i class="fa fa-fw fa-server"></i>\n'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"\n<small>\nCracking "+i(this.lambda(null!=(e=null!=a?a.passwords:a)?e.length:e,a))+" "+i((f=null!=(f=b.algorithm||(null!=a?a.algorithm:a))?f:g,typeof f===h?f.call(a,{name:"algorithm",hash:{},data:d}):f))+" hashes\n"+(null!=(e=b["if"].call(a,null!=a?a.organization:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'</small>\n</h1>\n<div class="row">\n<div class="col-md-12 btn-group">\n<button id="job-start" class="btn btn-primary">\n<i class="fa fa-fw fa-play"></i>\nStart Attack\n</button>\n<div class="dropdown">\n<button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n<i class="fa fa-fw fa-download"></i>\nHashes\n<i class="fa fa-fw fa-caret-down"></i>\n</button>\n<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n<li><a id="#dl-all-hashes">All Hashes</a></li>\n<li><a id="#dl-cracked-only">Cracked Hashes Only</a></li>\n<li><a id="#dl-uncracked-only">Uncracked Hashes Only</a></li>\n</ul>\n</div>\n<div class="dropdown">\n<button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n<i class="fa fa-fw fa-download"></i>\nPasswords\n<i class="fa fa-fw fa-caret-down"></i>\n</button>\n<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n<li><a href="#dl-all-passwords">All Passwords</a></li>\n</ul>\n</div>\n<button id="job-delete" class="btn btn-danger">\n<i class="fa fa-fw fa-trash"></i>\nDelete Job\n</button>\n</div>\n</div>\n<nav class="navbar">\n<div class="container-fluid">\n<!-- Brand and toggle get grouped for better mobile display -->\n<div class="navbar-header">\n<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-9" aria-expanded="false">\n<span class="sr-only">Toggle navigation</span>\n<span class="icon-bar"></span>\n<span class="icon-bar"></span>\n<span class="icon-bar"></span>\n</button>\n<a class="navbar-brand" href="#">Brand</a>\n</div>\n\n<!-- Collect the nav links, forms, and other content for toggling -->\n<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-9">\n<ul class="nav navbar-nav">\n<li class="active"><a href="#">Home</a></li>\n<li><a href="#">Link</a></li>\n<li><a href="#">Link</a></li>\n</ul>\n</div><!-- /.navbar-collapse -->\n</div><!-- /.container-fluid -->\n</nav>\n<br />\n<div class="row">\n<div class="col-md-6">\n<strong>Started:</strong> '+(null!=(e=b["if"].call(a,null!=a?a.started:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.program(5,d,0),data:d}))?e:"")+"<br />\n<strong>Completed:</strong> "+(null!=(e=b["if"].call(a,null!=a?a.completed:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.program(5,d,0),data:d}))?e:"")+'<br />\n</div>\n</div>\n<br />\n<div class="row">\n<div class="col-md-12">\n<table class="table table-hover">\n<thead>\n<tr>\n<th>#</th>\n<th>Encoding</th>\n<th>Preimage</th>\n<th>Hexdigest</th>\n</tr>\n</thead>\n<tbody>\n'+(null!=(e=b.each.call(a,null!=a?a.passwords:a,{name:"each",hash:{},fn:this.program(7,d,0),inverse:this.noop,data:d}))?e:"")+"</tbody>\n</table>\n</div>\n</div>\n"},useData:!0}),this.Handlebars.templates.AdminMenu=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n<i class="fa fa-fw fa-users"></i>\nAdministration\n<i class="fa fa-fw fa-caret-down"></i>\n</a>\n<ul class="dropdown-menu">\n<li>\n<a href="#manageusers">\n<i class="fa fa-fw fa-user"></i>\nManage Users\n</a>\n</li>\n</ul>\n'},useData:!0}),this.Handlebars.templates.PublicMenu=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return"\n"},useData:!0}),this.Handlebars.templates.UserMenu=Handlebars.template({1:function(a,b,c,d){return'<i class="fa fa-fw fa-bug"></i>\nDEBUG\n'},3:function(a,b,c,d){return"All is Dust\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<div class="navbar navbar-inverse navbar-fixed-top">\n<div class="container">\n<div class="navbar-header">\n<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n<span class="icon-bar"></span>\n<span class="icon-bar"></span>\n<span class="icon-bar"></span>\n</button>\n<a class="navbar-brand" href="#">\n'+(null!=(e=b["if"].call(a,null!=a?a.debug:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+'</a>\n</div>\n<div class="collapse navbar-collapse">\n<ul class="nav navbar-nav">\n<li>\n<a href="#home">\n<i class="fa fa-fw fa-home"></i>\nHome\n</a>\n</li>\n<li class="dropdown">\n<a href="#createjob">\n<i class="fa fa-fw fa-crosshairs"></i>\nCrack Hashes\n</a>\n</li>\n<li class="dropdown">\n<a href="#organizations">\n<i class="fa fa-fw fa-building-o"></i>\nOrganizations\n</a>\n</li>\n<li>\n<a href="#history">\n<i class="fa fa-fw fa-history"></i>\nJob History\n</a>\n</li>\n</ul>\n<!-- Right Hand Menu -->\n<ul id="top-menu-rightnav" class="nav navbar-nav navbar-right">\n<li class="dropdown">\n<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n<i class="fa fa-fw fa-user"></i>\n'+this.escapeExpression(this.lambda(null!=a?a.username:a,a))+'\n<i class="fa fa-fw fa-caret-down"></i>\n</a>\n<ul class="dropdown-menu">\n<li>\n<a href="#settings">\n<i class="fa fa-fw fa-cogs"></i>\nSettings\n</a>\n</li>\n<li role="presentation" class="divider"></li>\n<li>\n<a href="#logout">\n<i class="fa fa-fw fa-sign-out"></i>\nLogout\n</a>\n</li>\n</ul>\n</li>\n</ul>\n</div><!--/.nav-collapse -->\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.OrganizationTableRow=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"<td>"+g(f(null!=a?a.created:a,a))+"</td>\n<td>"+g(f(null!=a?a.name:a,a))+"</td>\n<td>"+g(f(null!=(e=null!=a?a.jobs:a)?e.length:e,a))+"</td>\n<td>"+g(f(null!=a?a.cracked_count:a,a))+"</td>\n<td>"+g((b.floor||a&&a.floor||b.helperMissing).call(a,null!=a?a.success_rate:a,{name:"floor",hash:{},data:d}))+'%</td>\n<td>\n<a href="#organization/'+g(f(null!=a?a.id:a,a))+'" class="btn btn-primary btn-xs" type="button">\nView Details\n<i class="fa fa-arrow-circle-right"></i>\n</a>\n</td>\n'},useData:!0}),this.Handlebars.templates.Organizations=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div id="create-new-org-modal" class="modal fade">\n<div class="modal-dialog">\n<div class="modal-content">\n<div class="modal-header">\n<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n<span aria-hidden="true">&times;</span>\n</button>\n<h4 class="modal-title">\n<i class="fa fa-fw fa-building"></i>\nCreate New Organization\n</h4>\n</div>\n<div class="modal-body">\n<div id="create-new-org-errors"></div>\n<form id="new-org-form">\n<div class="form-group">\n<label for="new-org-name">Organization Name</label>\n<input required type="text" class="form-control" id="new-org-name" placeholder="Organization Name">\n</div>\n</form>\n</div>\n<div class="modal-footer">\n<button type="button" class="btn btn-default" data-dismiss="modal">\nClose\n</button>\n<button id="create-new-org" type="button" class="btn btn-primary">\n<i class="fa fa-fw fa-plus"></i>\nCreate Organization\n</button>\n</div><!-- /.model-footer -->\n</div><!-- /.modal-content -->\n</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n<div class="container">\n<div class="page-header">\n<h1>\n<i class="fa fa-fw fa-building-o"></i>\nOrganizations\n</h1>\n</div>\n<div class="row">\n<div class="col-md-12">\n<button id="show-new-org-modal" class="btn btn-success" type="button">\n<i class="fa fa-fw fa-plus"></i>\nCreate New Organization\n</button>\n</div>\n</div>\n<br />\n<div class="row">\n<div class="col-md-12">\n<table class="table table-hover">\n<thead>\n<tr>\n<th>Created</th>\n<th>Name</th>\n<th>Jobs</th>\n<th>Cracked Passwords</th>\n<th>Success Rate</th>\n<th><!-- Button --></th>\n</tr>\n</thead>\n<tbody id="organizations-table">\n</tbody>\n</table>\n</div>\n</div>\n</div>\n'},useData:!0}),this.Handlebars.templates.SingleOrganization=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="container">\n<h1 class="page-header">\n<i class="fa fa-fw fa-building"></i>\n'+this.escapeExpression(this.lambda(null!=a?a.name:a,a))+'\n</h1>\n<div class="row">\n<div id="cracked-pie-chart" class="col-md-6">\n</div><!-- /.cracked-pie-chart -->\n<div id="length-area-chart" class="col-md-6">\n</div><!-- /.length-area-chart -->\n</div>\n<hr />\n<div class="row">\n<div class="col-md-3">\n<div class="dropdown">\n<button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n<i class="fa fa-fw fa-download"></i>\nHashes\n<i class="fa fa-fw fa-caret-down"></i>\n</button>\n<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n<li><a href="#">All Hashes</a></li>\n<li><a href="#">Cracked Hashes Only</a></li>\n<li><a href="#">Uncracked Hashes Only</a></li>\n</ul>\n</div>\n</div>\n<div class="col-md-3">\n<div class="dropdown">\n<button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n<i class="fa fa-fw fa-download"></i>\nPasswords\n<i class="fa fa-fw fa-caret-down"></i>\n</button>\n<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n<li><a href="#">All Passwords</a></li>\n</ul>\n</div>\n</div>\n</div>\n<br />\n<div class="row">\n<div id="all-passwords" class="col-md-12">\n</div><!-- /.all-passwords -->\n</div>\n</div>\n'},useData:!0}),AllIsDust.Models.Session=Backbone.Model.extend({urlRoot:"session",defaults:{username:"",password:"",data:"",expires:null,is_admin:!1,debug:!1},isValid:function(){return null!==this.get("expires")?!0:!1}}),AllIsDust.Models.Job=Backbone.Model.extend({urlRoot:"jobs",defaults:{name:null,created:null,organization:null,algorithm:null,passwords:[],completed:null,started:null,success_rate:0}}),AllIsDust.Models.Password=Backbone.Model.extend({urlRoot:"passwords",defaults:{digest:"",hexdigest:"",preimage:"",completed:!1}}),AllIsDust.Collections.Passwords=Backbone.Model.extend({model:AllIsDust.Models.Password}),AllIsDust.Models.Organization=Backbone.Model.extend({urlRoot:"organizations",defaults:{created:"",name:"",jobs:[],count:0,cracked_count:0,not_cracked_count:0,cracked_passwords:[],success_rate:0,password_ids:[]},initialize:function(){var a=this.get("password_ids"),b=new AllIsDust.Collections.Passwords(a);this.set("passwords",b)},passwords:function(){var a=this.get("password_ids");new AllIsDust.Collections.Passwords(a)}}),AllIsDust.Models.User=Backbone.Model.extend({urlRoot:"users",defaults:{created:"",name:"",jobs:[],organizations:[],is_admin:!1}}),AllIsDust.Models.Me=AllIsDust.Models.User.extend({urlRoot:"me"}),AllIsDust.Models.Algorithm=Backbone.Model.extend({defaults:{name:"",hex_length:"",digest:""}}),AllIsDust.Models.Error=Backbone.Model.extend({defaults:{title:"Error",error:""}}),AllIsDust.Collections.RecentJobs=Backbone.Collection.extend({model:AllIsDust.Models.Job,url:"/recent/jobs"}),AllIsDust.Collections.JobHistory=Backbone.Collection.extend({model:AllIsDust.Models.Job,url:"/history/jobs"}),AllIsDust.Collections.Organizations=Backbone.Collection.extend({model:AllIsDust.Models.Organization,url:"/organizations"}),AllIsDust.Collections.AllUsers=Backbone.Collection.extend({model:AllIsDust.Models.User,url:"/users"}),AllIsDust.Collections.SupportedAlgorithms=Backbone.Collection.extend({model:AllIsDust.Models.Algorithm,url:"/algorithms"}),AllIsDust.Collections.Passwords=Backbone.Collection.extend({model:AllIsDust.Models.Password,getCracked:function(){return this.filter(function(a){return null!==a.get("preimage")})},getCrackedPercentage:function(){return 100*(this.getCracked().length/this.length)},getLengthSeries:function(){var a=[];_.each(this.getCracked(),function(b){var c=b.get("preimage");void 0===a[c.length]?a[c.length]=1:a[c.length]+=1});for(var b=0;b<a.length;++b)void 0===a[b]&&(a[b]=0);return a}}),AllIsDust.Collections.OrganizationPasswords=AllIsDust.Collections.Passwords.extend({initialize:function(a,b){this.id=b.id},url:function(){return"/organization/passwords/"+this.id}}),AllIsDust.Collections.JobPasswords=AllIsDust.Collections.Passwords.extend({initialize:function(a,b){this.id=b.id},url:function(){return"/job/passwords/"+this.id}}),AllIsDust.Views.SelectFromCollection=Backbone.View.extend({tagName:"div",template:Handlebars.templates.SelectFromCollection,attributes:{"class":"form-group"},initialize:function(a){this.options=a,this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.collection.fetch()},render:function(){return this.$el.html(this.template({"select-id":this.options["select-id"],title:this.options.title,models:this.collection.toJSON()})),this}}),AllIsDust.Views.CrackedPieChart=AllIsDust.Views.BaseSubView.extend({el:"#cracked-pie-chart",tagName:"div",initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.render()},render:function(){return this.$el.highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Cracked Passwords"},tooltip:{pointFormat:"{series.name}: {point.percentage:.1f}%"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<strong>{point.name}</strong>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{name:"Percentage of Passwords",colorByPoint:!0,data:[{name:"Cracked",y:this.collection.getCrackedPercentage(),sliced:!0,selected:!0},{name:"Not Cracked",y:100-this.collection.getCrackedPercentage()}]}]}),this}}),AllIsDust.Views.LengthLineChart=AllIsDust.Views.BaseSubView.extend({el:"#length-line-chart",initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.render()},render:function(){var a=this.collection.getLengthSeries();return this.$el.highcharts({title:{text:"Password Length",x:-20},xAxis:{title:{text:"Password Length"},categories:_.range(a.length)},yAxis:{title:{text:"Number of Passwords"},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"Cracked Passwords",data:a}]}),this}}),AllIsDust.Views.LengthAreaChart=AllIsDust.Views.BaseSubView.extend({el:"#length-area-chart",initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.render()},render:function(){return this.$el.highcharts({chart:{type:"area"},title:{text:"Password Lengths"},xAxis:{title:{text:"Password Length"},allowDecimals:!1},yAxis:{title:{text:"Number of Passwords"},allowDecimals:!1},tooltip:{pointFormat:"Cracked {point.y:,.0f} passwords with a length of {point.x}"},plotOptions:{area:{pointStart:0,marker:{enabled:!1,symbol:"circle",radius:2,states:{hover:{enabled:!0}}}}},series:[{name:"Cracked Passwords",data:this.collection.getLengthSeries()}]}),this}}),AllIsDust.Views.AlertError=Backbone.View.extend({tagName:"div",template:Handlebars.templates.ErrorAlert,attributes:{"class":"alert alert-danger alert-dismissible",role:"alert"},initialize:function(){this.render()},render:function(){return console.log(this.model.toJSON()),this.$el.html(this.template(this.model.toJSON())),this}}),AllIsDust.Views.AdminMenu=Backbone.View.extend({tagName:"li",template:Handlebars.templates.AdminMenu,attributes:{"class":"dropdown"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},cleanup:function(){}}),AllIsDust.Views.UserMenu=Backbone.View.extend({tagName:"div",template:Handlebars.templates.UserMenu,render:function(){var a=this.model.toJSON();if(this.$el.html(this.template(a)),this.model.get("is_admin")){var b=new AllIsDust.Views.AdminMenu({model:this.model});this.$("#top-menu-rightnav").prepend(b.render().el)}return this},cleanup:function(){}}),AllIsDust.Views.PublicMenu=Backbone.View.extend({tagName:"div",template:Handlebars.templates.PublicMenu,render:function(){return this.$el.html(this.template()),this},cleanup:function(){}}),AllIsDust.Views.Login=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.Login,events:{"click #login-button":"loginAttempt"},initialize:function(){AllIsDust.Events.on("keypress:enter",this.loginAttempt,this)},render:function(){return $(document.body).addClass("eldrazi-splash"),this.$el.html(this.template()),this},showError:function(a){var b=new AllIsDust.Models.Error(a),c=new AllIsDust.Views.AlertError({model:b});this.$("#login-errors").html(c.el)},loginAttempt:function(){console.log("[LoginView] Creating new session");var a=new AllIsDust.Models.Session({username:this.$("#login-username").val(),password:this.$("#login-password").val()}),b=this;a.save(null,{success:function(a,c){b.loginSuccess(a,c)},error:function(a,c){b.showError(c.responseJSON)},wait:!0})},loginSuccess:function(a){console.log("[LoginView] Login success!"),window.localStorage.session=JSON.stringify(a.toJSON()),window.session=a,$(document.body).hasClass("eldrazi-splash")&&$(document.body).removeClass("eldrazi-splash");var b=new AllIsDust.Views.UserMenu({model:window.session});window.menu.renderMenu(b),window.router.navigate("#home",{trigger:!0})}}),AllIsDust.Views.PasswordTableRow=Backbone.View.extend({tagName:"tr",template:Handlebars.templates.PasswordTableRow,initialize:function(){this.model.on("change",this.render,this)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}}),AllIsDust.Views.PasswordsTable=Backbone.View.extend({el:"#all-passwords",template:Handlebars.templates.PasswordsTable,initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this)},render:function(){return this.$el.html(this.template()),this.collection.each(function(a){var b=new AllIsDust.Views.PasswordTableRow({model:a});this.$("#passwords-table").append(b.render().el)},this),this}}),AllIsDust.Views.JobTableRow=Backbone.View.extend({tagName:"tr",template:Handlebars.templates.JobTableRow,render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),AllIsDust.Views.JobGraphs=Backbone.View.extend({tagName:"div",template:Handlebars.templates.JobGraphs,render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),AllIsDust.Views.Job=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.SingleJob,events:{"click #job-start":"startJob","click #job-download-hashes":"downloadHashes","click #job-download-cleartext":"downloadCleartext"
},initialize:function(){this.model.on("change",this.render,this),this.model.fetch()},render:function(){console.log("[JobView] Render page called");var a=this.template(this.model.toJSON());return this.$el.html(a),this.passwords=new AllIsDust.Collections.JobPasswords([],{id:this.model.get("id")}),this.passwords.on("reset",this.renderPasswords,this),this.passwords.on("update",this.renderPasswords,this),this.passwords.fetch(),this},renderPasswords:function(){new AllIsDust.Views.CrackedPieChart({collection:this.passwords}),new AllIsDust.Views.LengthAreaChart({collection:this.passwords}),new AllIsDust.Views.PasswordsTable({collection:this.passwords})},showError:function(a){var b=new AllIsDust.Models.Error(a),c=new AllIsDust.Views.AlertError({model:b});this.$("#job-errors").html(c.el)},startJob:function(){this.model.set("started",!0);var a=this;this.model.save(null,{success:function(){console.log("Sucessfully started job")},error:function(b,c){a.showError(c.responseJSON)}})},downloadHashes:function(){},downloadCleartext:function(){}}),AllIsDust.Views.Home=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.Home,initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.collection.fetch()},render:function(){return this.$el.html(this.template()),this.collection.each(function(a){var b=new AllIsDust.Views.JobTableRow({model:a});this.$("#recent-jobs").append(b.render().el)},this),this}}),AllIsDust.Views.JobHistory=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.JobHistory,initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.collection.fetch()},render:function(){return this.$el.html(this.template()),this.collection.each(function(a){var b=new AllIsDust.Views.JobTableRow({model:a});this.$("#job-history").append(b.render().el)},this),this}}),AllIsDust.Views.SingleOrganization=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.SingleOrganization,initialize:function(){this.model.on("change",this.render,this),this.model.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.passwords=new AllIsDust.Collections.OrganizationPasswords([],{id:this.model.get("id")}),this.passwords.on("reset",this.renderPasswords,this),this.passwords.on("update",this.renderPasswords,this),this.passwords.fetch(),this},renderPasswords:function(){new AllIsDust.Views.CrackedPieChart({collection:this.passwords}),new AllIsDust.Views.LengthAreaChart({collection:this.passwords}),new AllIsDust.Views.PasswordsTable({collection:this.passwords})}}),AllIsDust.Views.OrganizationTableRow=Backbone.View.extend({tagName:"tr",template:Handlebars.templates.OrganizationTableRow,initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),AllIsDust.Views.Organizations=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.Organizations,events:{"click #show-new-org-modal":"showCreateOrg","click #create-new-org":"createOrg"},initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.collection.fetch()},render:function(){return this.$el.html(this.template()),this.collection.each(function(a){var b=new AllIsDust.Views.OrganizationTableRow({model:a});this.$("#organizations-table").append(b.render().el)},this),this},showError:function(a){var b=new AllIsDust.Models.Error(a),c=new AllIsDust.Views.AlertError({model:b});this.$("#create-new-org-errors").html(c.el)},showCreateOrg:function(){this.$("#create-new-org-modal").on("shown.bs.modal",function(){$("#new-org-name").focus()}),this.$("#create-new-org-modal").modal("show")},createOrg:function(){var a=new AllIsDust.Models.Organization;a.set("name",this.$("#new-org-name").val());var b=this;a.save(null,{success:function(){console.log("[Organizations] Successully created new org"),b.$("#create-new-org-modal").modal("toggle"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),b.collection.fetch()},error:function(a,c){console.log("[Organizations] Failed to create new org"),b.showError(c.responseJSON)}})}}),AllIsDust.Views.CreateJob=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.CreateJob,events:{"keyup #job-name":"changeName","change #job-organization":"changeOrganization","change #job-algorithm":"changeAlgorithm","click #create-job":"createNewJob","dragover #dropzone":"handleDragOver","drop #dropzone":"handleFileSelect"},render:function(){var a=this.template();this.$el.html(a);var b=new AllIsDust.Collections.Organizations,c=new AllIsDust.Views.SelectFromCollection({"select-id":"job-organization",title:"Organization",collection:b});this.$("#select-organization").html(c.render().el);var d=new AllIsDust.Collections.SupportedAlgorithms,e=new AllIsDust.Views.SelectFromCollection({"select-id":"job-algorithm",title:"Hash Algorithm",collection:d});return this.$("#select-algorithm").html(e.render().el),this},showError:function(a){var b=new AllIsDust.Models.Error(a),c=new AllIsDust.Views.AlertError({model:b});this.$("#job-errors").html(c.el)},changeName:function(){var a=$("#job-name").val();this.model.set("name",a),console.log("[CreateJob] Name changed to: "+a)},changeOrganization:function(){var a=$("#job-organization").val();this.model.set("organization",a),console.log("[CreateJob] Organization changed to: "+a)},changeAlgorithm:function(){var a=$("#job-algorithm").val();this.model.set("algorithm",a),console.log("[CreateJob] Algorithm changed to: "+a)},createNewJob:function(){var a=$("#job-passwords").val().split("\n");this.model.set("passwords",a),console.log("[CreateJob] Password count: "+a.length);var b=this;this.model.save(null,{success:function(){var a="#job/"+b.model.id;window.router.navigate(a,{trigger:!0})},error:function(a,c){b.showError(c.responseJSON)},wait:!0})},handleDragOver:function(a){var b=a.originalEvent;console.log("[CreateJob] Drag over event, waiting for the drop ..."),b.stopPropagation(),b.preventDefault(),b.dataTransfer.dropEffect="copy",window.dropzoneFlashed||(console.log("[CreateJob] Starting flash animation"),$("#dropzone").hasClass("fadeIn")&&$("#dropzone").removeClass("fadeIn"),window.dropzoneFlashed=!0,$("#dropzone").addClass("animated flash"),setTimeout(function(){$("#dropzone").removeClass("flash"),window.dropzoneFlashed=!1,console.log("[CreateJob] Flash animation reset")},2500))},handleFileSelect:function(a){var b=a.originalEvent;console.log("[CreateJob] File(s) dropped in our dropzone!"),b.stopPropagation(),b.preventDefault();for(var c=b.dataTransfer.files,d=0;d<c.length;++d)console.log("[CreateJob] Reading file #"+(d+1)),this.readFile(c[d])},readFile:function(a){var b=new FileReader,c=this.$("#job-passwords").val(),d=this;b.onloadend=function(){var a=0;a<c.length&&!c.endsWith("\n")&&(c+="\n"),d.$("#job-passwords").val(""),d.$("#job-passwords").val(c+b.result)},b.readAsBinaryString(a)}}),AllIsDust.Views.Settings=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.Settings,events:{"click #change-password":"changePassword"},initialize:function(){this.model.on("change",this.render,this),this.model.fetch()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},changePassword:function(){this.model.set("password",$("#new-password").val()),this.model.save(null,{success:function(a,b){console.log("[Settings] Change password success!"),this.showSuccess(b.responseJSON)},error:function(a,b){console.log("[Settings] Change password error!"),this.showError(b.responseJSON)}})}}),AllIsDust.Views.UserTableRow=Backbone.View.extend({tagName:"tr",template:Handlebars.templates.UserTableRow,render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}}),AllIsDust.Views.EditUser=Backbone.View.extend({tagName:"div",template:Handlebars.templates.EditUser,render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}}),AllIsDust.Views.ManageUsers=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.ManageUsers,events:{"click #show-new-user-modal":"showCreateUser","click #create-new-user":"createUser","click #show-edit-user-modal":"showEditUser","click #edit-user":"editUser","click #show-delete-user":"showDeleteUser","click #delete-user":"deleteUser"},initialize:function(){this.collection.on("reset",this.render,this),this.collection.on("update",this.render,this),this.collection.fetch()},render:function(){return this.$el.html(this.template()),this.collection.each(function(a){var b=new AllIsDust.Views.UserTableRow({model:a});this.$("#all-users").append(b.render().el)},this),this},showError:function(a){var b=new AllIsDust.Models.Error(a),c=new AllIsDust.Views.AlertError({model:b});this.$("#create-new-user-errors").html(""),this.$("#create-new-user-errors").append(c.el)},showCreateUser:function(){this.$("#create-new-user-modal").on("shown.bs.modal",function(){$("#new-user-name").focus()}),this.$("#create-new-user-modal").modal("show")},createUser:function(){var a=new AllIsDust.Models.User;a.set("name",this.$("#new-user-name").val()),a.set("password",this.$("#new-user-password").val()),a.set("is_admin",this.$("#new-user-is-admin").checked);var b=this;a.save(null,{success:function(){console.log("[ManageUsers] Successfully created new user"),b.$("#create-new-user-modal").modal("toggle"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),b.collection.fetch()},error:function(a,c){console.log("[ManageUsers] Error while creating new user"),b.showError(c.responseJSON)}})},showEditUser:function(){},editUser:function(){},showDeleteUser:function(){},deleteUser:function(){}}),AllIsDust.Views.NotFound=AllIsDust.Views.BaseView.extend({template:Handlebars.templates.NotFound,initialize:function(){this.renderViewWithFade(),AllIsDust.Events.on("router:notfound",this.renderViewWithFade,this)},render:function(){var a=this.template();return this.$el.html(a),this}});var BaseRouter=Backbone.Router.extend({execute:function(a,b,c){return"login"===c||window.session.isValid()?void(a&&a.apply(this,b)):(window.router.navigate("#login",{trigger:!0}),!1)}});AllIsDust.Router=BaseRouter.extend({BASE_TITLE:"All is Dust: ",routes:{"":"index",login:"login",home:"home",createjob:"createjob","job/:id":"job",history:"history",organizations:"organizations","organization/:id":"organization",settings:"settings",manageusers:"manageusers",logout:"logout","*other":"notfound"},index:function(){this.login()},login:function(){console.log("[Router] -> login"),document.title=this.BASE_TITLE+"Login",AllIsDust.Events.trigger("router:login")},home:function(){console.log("[Router] -> home"),document.title=this.BASE_TITLE+"Home",AllIsDust.Events.trigger("router:home")},createjob:function(){console.log("[Router] -> createjob"),document.title=this.BASE_TITLE+"Create Job",AllIsDust.Events.trigger("router:createjob")},job:function(a){console.log("[Router] -> job: "+a),document.title=this.BASE_TITLE+"Job",AllIsDust.Events.trigger("router:job",a)},history:function(){console.log("[Router] -> history"),document.title=this.BASE_TITLE+"History",AllIsDust.Events.trigger("router:history")},organizations:function(){console.log("[Router] -> organizations"),document.title=this.BASE_TITLE+"Organizations",AllIsDust.Events.trigger("router:organizations")},organization:function(a){console.log("[Router] -> organization: "+a),document.title=this.BASE_TITLE+"Organization",AllIsDust.Events.trigger("router:organization",a)},settings:function(){console.log("[Router] -> settings"),document.title=this.BASE_TITLE+"Settings",AllIsDust.Events.trigger("router:settings")},manageusers:function(){console.log("[Router] -> manageusers"),document.title=this.BASE_TITLE+"Manage Users",AllIsDust.Events.trigger("router:manageusers")},logout:function(){console.log("[Router] -> logout"),AllIsDust.Events.trigger("router:logout")},notfound:function(){console.log("[Router] -> notfound"),document.title=this.BASE_TITLE+"Not Found",AllIsDust.Events.trigger("router:notfound")}}),$(document).ready(function(){if(window.app=new AllIsDust.Views.AppView,window.menu=new AllIsDust.Views.MenuView,void 0!==window.localStorage.session)try{var a=JSON.parse(window.localStorage.session);window.session=new AllIsDust.Models.Session(a);var b=new AllIsDust.Views.UserMenu({model:window.session});window.menu.renderMenu(b),console.log("[AllIsDust] Restored saved session data")}catch(c){console.log("[AllIsDust] Failed to parse local session data"),delete window.localStorage.session,window.session=new AllIsDust.Models.Session}else window.session=new AllIsDust.Models.Session;console.log("[AllIsDust] Starting router ..."),window.router=new AllIsDust.Router,Backbone.history.start()}),AllIsDust.Views.MenuView=Backbone.View.extend({el:"#page-menu-wrapper",initialize:function(){this.currentMenu=null},renderMenu:function(a){console.log("[MenuView] Rendering menu"),this.currentMenu&&(console.log("[MenuView] Cleaning up old menu"),this.currentMenu.cleanup(),this.currentMenu.remove()),this.addFadeIn(),this.$el.html(a.render().el),this.currentMenu=a},addFadeIn:function(){this.$el.addClass("fadeIn");var a=this;setTimeout(function(){a.$el.removeClass("fadeIn")},500)}}),AllIsDust.Views.AppView=Backbone.View.extend({el:"#page-content-wrapper",tagName:"div",initialize:function(){console.log("[AppView] Initializing main app view"),this.menu=new AllIsDust.Views.MenuView,this.currentView=null;var a=this;AllIsDust.Events.on("router:login",function(){delete window.session,delete window.localStorage.session;var b=new AllIsDust.Views.PublicMenu;a.menu.renderMenu(b);var c=new AllIsDust.Models.Session,d=new AllIsDust.Views.Login({model:c});a.renderView(d)}),AllIsDust.Events.on("router:home",function(){var b=new AllIsDust.Collections.RecentJobs,c=new AllIsDust.Views.Home({collection:b});a.renderView(c)}),AllIsDust.Events.on("router:notfound",function(){var b=new AllIsDust.Views.NotFound;a.renderView(b)}),AllIsDust.Events.on("router:createjob",function(){var b=new AllIsDust.Models.Job,c=new AllIsDust.Views.CreateJob({model:b});a.renderView(c)}),AllIsDust.Events.on("router:job",function(b){var c=new AllIsDust.Models.Job({id:b}),d=new AllIsDust.Views.Job({model:c});a.renderView(d)}),AllIsDust.Events.on("router:history",function(){var b=new AllIsDust.Collections.JobHistory,c=new AllIsDust.Views.JobHistory({collection:b});a.renderView(c)}),AllIsDust.Events.on("router:organizations",function(){var b=new AllIsDust.Collections.Organizations,c=new AllIsDust.Views.Organizations({collection:b});a.renderView(c)}),AllIsDust.Events.on("router:organization",function(b){var c=new AllIsDust.Models.Organization({id:b}),d=new AllIsDust.Views.SingleOrganization({model:c});a.renderView(d)}),AllIsDust.Events.on("router:settings",function(){var b=new AllIsDust.Models.Me,c=new AllIsDust.Views.Settings({model:b});a.renderView(c)}),AllIsDust.Events.on("router:logout",function(){delete window.session,delete window.localStorage.session,window.router.navigate("#login",{trigger:!1}),location.reload(!0)}),AllIsDust.Events.on("router:manageusers",function(){var b=new AllIsDust.Collections.AllUsers,c=new AllIsDust.Views.ManageUsers({collection:b});a.renderView(c)})},renderView:function(a){console.log("[AppView] Rendering new view");var b=this;this.fadeViewOut(function(){console.log("[AppView] Rendering new view"),b.$el.html(a.render().el),b.currentView=a})},fadeViewOut:function(a){console.log("[AppView] Fading out old view"),this.$el.addClass("fadeOut");var b=this;setTimeout(function(){b.currentView&&(console.log("[AppView] Cleaning up current view"),b.currentView.cleanup(),b.currentView.remove()),b.$el.removeClass("fadeOut"),b.fadeViewIn(a)},500)},fadeViewIn:function(a){console.log("[AppView] Fading in new view"),this.$el.addClass("fadeIn");var b=this;setTimeout(function(){b.$el.removeClass("fadeIn")},500),a&&a()}});
//# sourceMappingURL=all-is-dust.min.js.map